"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[159],{9159:($e,fe,u)=>{u.d(fe,{I6:()=>Pe,tP:()=>Xe});var t=u(4438),_=(u(8203),u(5024)),Z=(u(6860),u(5542)),H=(u(177),u(1413)),S=(u(6648),u(4412)),M=(u(4402),u(7673)),q=(u(6977),u(6697),u(4085));let Oe=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[Z.E9]})}return s})();var ne=u(6600),re=u(7786),J=u(4572),W=u(6354);let Xe=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=t.$C({type:s});static#s=this.\u0275inj=t.G2t({imports:[ne.yE,Oe,ne.yE]})}return s})();class Pe extends _.qS{get data(){return this._data.value}set data(a){a=Array.isArray(a)?a:[],this._data.next(a),this._renderChangesSubscription||this._filterData(a)}get filter(){return this._filter.value}set filter(a){this._filter.next(a),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(a){this._sort=a,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(a){this._paginator=a,this._updateChangeSubscription()}constructor(a=[]){super(),this._renderData=new S.t([]),this._filter=new S.t(""),this._internalPageChanges=new H.B,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,o)=>{const i=e[o];if((0,q.o1)(i)){const n=Number(i);return n<9007199254740991?n:i}return i},this.sortData=(e,o)=>{const i=o.active,n=o.direction;return i&&""!=n?e.sort((r,l)=>{let c=this.sortingDataAccessor(r,i),f=this.sortingDataAccessor(l,i);const d=typeof c,m=typeof f;d!==m&&("number"===d&&(c+=""),"number"===m&&(f+=""));let h=0;return null!=c&&null!=f?c>f?h=1:c<f&&(h=-1):null!=c?h=1:null!=f&&(h=-1),h*("asc"==n?1:-1)}):e},this.filterPredicate=(e,o)=>{const i=Object.keys(e).reduce((r,l)=>r+e[l]+"\u25ec","").toLowerCase(),n=o.trim().toLowerCase();return-1!=i.indexOf(n)},this._data=new S.t(a),this._updateChangeSubscription()}_updateChangeSubscription(){const a=this._sort?(0,re.h)(this._sort.sortChange,this._sort.initialized):(0,M.of)(null),e=this._paginator?(0,re.h)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):(0,M.of)(null),i=(0,J.z)([this._data,this._filter]).pipe((0,W.T)(([l])=>this._filterData(l))),n=(0,J.z)([i,a]).pipe((0,W.T)(([l])=>this._orderData(l))),r=(0,J.z)([n,e]).pipe((0,W.T)(([l])=>this._pageData(l)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=r.subscribe(l=>this._renderData.next(l))}_filterData(a){return this.filteredData=null==this.filter||""===this.filter?a:a.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(a){return this.sort?this.sortData(a.slice(),this.sort):a}_pageData(a){if(!this.paginator)return a;const e=this.paginator.pageIndex*this.paginator.pageSize;return a.slice(e,e+this.paginator.pageSize)}_updatePaginator(a){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=a,e.pageIndex>0)){const o=Math.ceil(e.length/e.pageSize)-1||0,i=Math.min(e.pageIndex,o);i!==e.pageIndex&&(e.pageIndex=i,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}}}}]);