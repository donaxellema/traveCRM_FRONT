"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[372],{2372:(te,T,i)=>{i.r(T),i.d(T,{default:()=>ee});var f=i(177),M=i(9159),_=i(9042),b=i(2102),x=i(9213),k=i(8834),C=i(6695),$=i(4412),S=i(1413),j=i(152),A=i(3294),G=i(7575),c=i(9417),Y=i(7403),y=i(5351),w=i(2798),F=i(4190),e=i(4438),u=i(9181);let P=(()=>{class a{get accessToken(){return localStorage.getItem("accessToken")??""}set authenticated(t){localStorage.setItem("authenticated",t)}get authenticated(){return localStorage.getItem("authenticated")??""}constructor(t){this.http=t,this._authenticated=!1,this._httpClient=(0,e.WQX)(u.Qq),this.apiUrl=F.S.url}uploadImage(t){const o=new FormData;return o.append("image",t),this.http.post(`${this.apiUrl}upload/`,o)}static#e=this.\u0275fac=function(o){return new(o||a)(e.KVO(u.Qq))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var N=i(6375),U=i(8410),v=i(7673),D=i(8891),B=i.n(D),O=i(3306),X=i.n(O);let E=(()=>{class a{get accessToken(){return localStorage.getItem("accessToken")??""}set authenticated(t){localStorage.setItem("authenticated",t)}get authenticated(){return localStorage.getItem("authenticated")??""}constructor(t){this.http=t,this._authenticated=!1,this._httpClient=(0,e.WQX)(u.Qq),this.apiUrl=F.S.url}getVerificacionDEAgentes(t,o=""){let s=new u.Nl;console.log("data services"),console.log(t);const n=(l,h="")=>{for(const d in l)if(l.hasOwnProperty(d)){const g=l[d],p=h?`${h}.${d}`:d;"object"==typeof g&&null!==g?n(g,p):s=s.set(p,g)}};n(t),console.log("mi parametro seteado "+s),console.log("this.accessToken"),console.log(this.accessToken);let r=(new u.Lr).set("Content-Type","application/json").set("Authorization",this.accessToken?`${this.accessToken}`:"");return this.http.get(`${this.apiUrl}agentes_verifica/`,{headers:r,params:s})}postAgentes(t){let o=(new u.Lr).set("Content-Type","application/json").set("Authorization",null!=this.accessToken?this.accessToken:""),s=new u.Nl;return this.http.post(`${this.apiUrl}agentes/`,t,{headers:o,params:s})}putAgentes(t){console.log(t);let o=(new u.Lr).set("Content-Type","application/json").set("Authorization",null!=this.accessToken?this.accessToken:""),s=new u.Nl;return this.http.put(`${this.apiUrl}agentes/`,t,{headers:o,params:s})}getAgentesYPersonasBY_ID(t,o=""){let s=new u.Nl;console.log("data services"),console.log(t);const n=(l,h="")=>{for(const d in l)if(l.hasOwnProperty(d)){const g=l[d],p=h?`${h}.${d}`:d;"object"==typeof g&&null!==g?n(g,p):s=s.set(p,g)}};n(t),console.log("mi parametro seteado "+s),console.log("this.accessToken"),console.log(this.accessToken);let r=(new u.Lr).set("Content-Type","application/json").set("Authorization",this.accessToken?`${this.accessToken}`:"");return this.http.get(`${this.apiUrl}agentes_by_id/`,{headers:r,params:s})}getAgentesYPersonasSearch(t,o=""){let s=new u.Nl;console.log("data services"),console.log(t);const n=(l,h="")=>{for(const d in l)if(l.hasOwnProperty(d)){const g=l[d],p=h?`${h}.${d}`:d;"object"==typeof g&&null!==g?n(g,p):s=s.set(p,g)}};n(t),console.log("mi parametro seteado "+s),console.log("this.accessToken"),console.log(this.accessToken);let r=(new u.Lr).set("Content-Type","application/json").set("Authorization",this.accessToken?`${this.accessToken}`:"");return this.http.get(`${this.apiUrl}agentes_search/`,{headers:r,params:s})}getAgentesY_Personas(t,o=""){let s=new u.Nl;console.log("data services"),console.log(t);const n=(l,h="")=>{for(const d in l)if(l.hasOwnProperty(d)){const g=l[d],p=h?`${h}.${d}`:d;"object"==typeof g&&null!==g?n(g,p):s=s.set(p,g)}};n(t),console.log(this.accessToken);let r=(new u.Lr).set("Content-Type","application/json").set("Authorization",this.accessToken?`${this.accessToken}`:"");return this.http.get(`${this.apiUrl}agentes/`,{headers:r,params:s})}signInUsingToken(){if(this.authToken=this.accessToken,this._verifyJWTToken(this.accessToken))return(0,v.of)([200,{accessToken:this.accessToken,tokenType:"bearer"}])}check(){return"true"==localStorage.getItem("authenticated")?(0,v.of)(!0):!localStorage.getItem("accessToken")||U.S.isTokenExpired(this.accessToken)?(0,v.of)(!1):this.signInUsingToken()}_verifyJWTToken(t){const o=t.split("."),s=o[0],n=o[1];return o[2]===this._base64url(X()(s+"."+n,this.accessToken))}_base64url(t){let o=B().stringify(t);return o=o.replace(/=+$/,""),o=o.replace(/\+/g,"-"),o=o.replace(/\//g,"_"),o}static#e=this.\u0275fac=function(o){return new(o||a)(e.KVO(u.Qq))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var I=i(7973),V=i(6600);function z(a,m){if(1&a&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&a){const t=m.$implicit;e.R7$(1),e.SpI(" ",t.pers_nombres," ")}}function L(a,m){if(1&a){const t=e.RV6();e.j41(0,"div",9)(1,"div")(2,"label",17),e.EFF(3," Buscar por nombre "),e.k0s(),e.j41(4,"input",40),e.bIt("input",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.onSearchChange(s.searchQuery))})("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.searchQuery=s)}),e.k0s()(),e.j41(5,"div")(6,"label",41),e.EFF(7,"Seleccionar persona"),e.k0s(),e.j41(8,"select",42),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.searchQuery=s)})("ngModelChange",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.buscarPersona(s.searchQuery))}),e.DNE(9,z,2,1,"option",43),e.k0s()()()}if(2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngModel",t.searchQuery),e.R7$(4),e.Y8G("ngModel",t.searchQuery),e.R7$(1),e.Y8G("ngForOf",t.allResults)}}function J(a,m){if(1&a&&(e.j41(0,"div",30),e.nrm(1,"img",44),e.k0s()),2&a){const t=e.XpG();e.R7$(1),e.Y8G("src",t.imageUrl,e.B4B)}}function Q(a,m){if(1&a&&(e.j41(0,"div",30),e.nrm(1,"img",44),e.k0s()),2&a){const t=e.XpG(2);e.R7$(1),e.FCK("src","",t.urlImagen,"",t.urlImagendesdeServer,"",e.B4B)}}function K(a,m){if(1&a&&(e.j41(0,"div"),e.DNE(1,Q,2,2,"div",33),e.k0s()),2&a){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",null!=t.urlImagendesdeServer)}}let R=(()=>{class a{constructor(t,o,s,n,r,l,h){this.imageUploadService=t,this._servicePersona=o,this.dialogRef=s,this.data=n,this._agentesService=r,this._systemServices=l,this.cdr=h,this.urlImagen=F.S.urlImagen,this.persona={},this.usuario={},this.searchSubject=new S.B,this.isLoading=!1,this.imageUrl=null,this.estadoPassword=!1,this.selectedFile=null,this.searchQuery="",this.filteredResults=[],console.log(this.data),"Editar"==this.data.data.tipodialogo&&(this.usuario=this.data.data[0],this.persona=this.data.persona[0],this.rolSeleccionado=this.usuario.usu_rol,this.urlImagendesdeServer=this.usuario.usu_imagen)}ngOnInit(){this.searchSubject.pipe((0,j.B)(300),(0,A.F)()).subscribe(t=>{t.length>=3?this.buscarPersona():this.persona={}}),this.isLoading=!0,this.cdr.detectChanges(),this.tipoDialog=this.data.data.tipodialogo,console.log("usuario "+JSON.stringify(this.data.data[0])),console.log("persona "+JSON.stringify(this.data.persona[0]))}onChange(t){console.log(t.value)}onCancel(){this.dialogRef.close()}getToken(){this.userToken=localStorage.getItem("user"),this.userToken=JSON.parse(this.userToken)}onSave(){if(this.getToken(),1==this.estadoPassword&&(this.usuario.usu_password=this.passwordNew),"Editar"==this.tipoDialog)this.persona.usuario=this.userToken.pers_nombres,this.usuario.personas=this.persona,this.usuario.usuario=this.userToken.pers_nombres,this._agentesService.putAgentes({data:this.usuario,opcion:"U",_limite:0,_offset:0}).subscribe(o=>{console.log(o),200==o.code&&this._systemServices.showAlertSuccessCenter(o.message),this.dialogRef.close()},o=>{console.log(o),this._systemServices.showAlertError(o.error.error),this.dialogRef.close()});else{this.persona.usuario=this.userToken.pers_nombres,this.usuario.personas=this.persona,this.usuario.usuario=this.userToken.pers_nombres;const t={data:this.usuario,opcion:"I",_limite:0,_offset:0};console.log("first 216"),console.log(JSON.stringify(t)),this._agentesService.postAgentes(t).subscribe(o=>{console.log(o),200==o.code&&this._systemServices.showAlertSuccessCenter(o.message),this.dialogRef.close()},o=>{console.log(o),this._systemServices.showAlertError(o.error.error),this.dialogRef.close()})}}onFileChange(t){this.urlImagendesdeServer=null;const o=t.target.files[0];if(o){this.selectedFile=o;const s=new FileReader;s.onload=n=>this.imageUrl=s.result,s.readAsDataURL(o)}}onUpload(){this.selectedFile?(console.log(this.selectedFile),this.imageUploadService.uploadImage(this.selectedFile).subscribe(t=>{console.log("Imagen subida exitosamente:",t),this.usuario.usu_imagen=t.filename},t=>{console.error("Error subiendo la imagen:",t)})):(console.error("No se ha seleccionado ninguna imagen"),this._systemServices.showAlertErrorTop("No se ha seleccionado ninguna imagen"))}cargaDataEnForm(){this.persona=this.allResults.data}onSearchChange(t){this.searchSubject.next(t)}buscarPersona(){this._servicePersona.getPersonasSearch({buscar:this.searchQuery,opcion:"S",_limite:100,_offset:0}).subscribe(o=>{console.log("result"),console.log(JSON.stringify(o.data)),this.allResults=o.data,this._agentesService.getVerificacionDEAgentes({pers_id:o.data[0].pers_id,opcion:"V",_limite:100,_offset:0}).subscribe(n=>{console.log(JSON.stringify(n)),(n.code=200)&&(this.persona=o.data[0])},n=>{console.error("Error :",n)})})}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(P),e.rXU(N.X),e.rXU(y.CP),e.rXU(y.Vh),e.rXU(E),e.rXU(I.W),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-agentesdialog"]],standalone:!0,features:[e.aNF],decls:81,vars:17,consts:[[1,"dialog-content","p-6"],[1,"w-full"],[1,"text-xl"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],["class","grid gap-6 grid-cols-2 py-4",4,"ngIf"],[1,"mx-auto","bg-white"],[1,"grid","gap-6","grid-cols-2","py-4"],["for","first_name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","text","id","first_name","placeholder","Nombres","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],["for","last_name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","text","id","last_name","placeholder","Apellidos","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],["for","telefono",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","text","id","telefono","placeholder","0000000000","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],[1,"border-t"],["for","nickname",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","text","id","nickname","placeholder","John","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],[1,"mb-6"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","email","id","email","placeholder","example@example.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],["for","checkbox1",1,"ml-2","block","text-gray-700"],["type","checkbox","id","checkbox1",1,"my-3","h-5","w-5","h-5","w-5",3,"ngModel","ngModelChange"],["for","password1",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["type","password","id","password1","placeholder","******","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"disabled","ngModel","ngModelChange"],[1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],[3,"value"],[1,"p-6","max-w-md","mx-auto","bg-white","rounded-xl","shadow-md","overflow-hidden","md:max-w-2xl"],[1,"text-2xl","mb-4","text-center"],[1,"mb-4"],[1,"block","text-gray-700"],["type","file",1,"w-full","px-3","py-2","border","rounded",3,"change"],["class","mb-4",4,"ngIf"],[4,"ngIf"],["type","button",1,"bg-blue-500","text-white","px-4","py-2","rounded","w-full",3,"click"],[1,"grid","sm:grid-cols-4","gap-6","w-full","mt-8"],["mat-dialog-actions",""],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","type","button",1,"ml-4",3,"color","click"],["type","text","id","nickname","placeholder","Buscar por nombres",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","input","ngModelChange"],[1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["name","","id","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["alt","Imagen Cargada",1,"w-full","h-auto","rounded","shadow-md",3,"src"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3),e.k0s()(),e.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"div")(8,"a",6),e.EFF(9,"Datos personales de agentes"),e.k0s()()()()(),e.DNE(10,L,10,3,"div",7),e.j41(11,"div",8)(12,"div",9)(13,"div")(14,"label",10),e.EFF(15,"Nombres"),e.k0s(),e.j41(16,"input",11),e.bIt("ngModelChange",function(r){return s.persona.pers_nombres=r}),e.k0s()(),e.j41(17,"div")(18,"label",12),e.EFF(19,"Apellidos"),e.k0s(),e.j41(20,"input",13),e.bIt("ngModelChange",function(r){return s.persona.pers_apellidos=r}),e.k0s()(),e.j41(21,"div")(22,"label",14),e.EFF(23,"Tel\xe9fono"),e.k0s(),e.j41(24,"input",15),e.bIt("ngModelChange",function(r){return s.persona.pers_telefono=r}),e.k0s()()(),e.nrm(25,"div",16),e.k0s(),e.j41(26,"div",3)(27,"div",4)(28,"div",5)(29,"div")(30,"a",6),e.EFF(31,"Datos del Agente"),e.k0s()()()()(),e.j41(32,"div",8)(33,"div",9)(34,"div")(35,"label",17),e.EFF(36,"Nickname"),e.k0s(),e.j41(37,"input",18),e.bIt("ngModelChange",function(r){return s.usuario.usu_nickname=r}),e.k0s()(),e.j41(38,"div",19)(39,"label",20),e.EFF(40,"Email"),e.k0s(),e.j41(41,"input",21),e.bIt("ngModelChange",function(r){return s.usuario.usu_email=r}),e.k0s()(),e.j41(42,"div")(43,"label",22),e.EFF(44,"Resetear contrase\xf1a"),e.k0s(),e.j41(45,"input",23),e.bIt("ngModelChange",function(r){return s.estadoPassword=r}),e.k0s()(),e.j41(46,"div")(47,"label",24),e.EFF(48,"Contrase\xf1a por defecto"),e.k0s(),e.j41(49,"input",25),e.bIt("ngModelChange",function(r){return s.passwordNew=r}),e.k0s()(),e.j41(50,"div")(51,"mat-label"),e.EFF(52,"Rol"),e.k0s(),e.j41(53,"mat-select",26),e.bIt("ngModelChange",function(r){return s.usuario.usu_rol=r}),e.j41(54,"mat-option",27),e.EFF(55,"Administrador"),e.k0s(),e.j41(56,"mat-option",27),e.EFF(57,"Agente"),e.k0s(),e.j41(58,"mat-option",27),e.EFF(59,"Tecnico"),e.k0s()()()(),e.j41(60,"div",19)(61,"div",28)(62,"h2",29),e.EFF(63," Subir Imagen "),e.k0s(),e.j41(64,"form")(65,"div",30)(66,"label",31),e.EFF(67," Seleccionar Imagen "),e.k0s(),e.j41(68,"input",32),e.bIt("change",function(r){return s.onFileChange(r)}),e.k0s()(),e.DNE(69,J,2,1,"div",33)(70,K,2,1,"div",34),e.j41(71,"button",35),e.bIt("click",function(){return s.onUpload()}),e.EFF(72,"Subir"),e.k0s()()()(),e.nrm(73,"div",16),e.k0s(),e.j41(74,"div"),e.nrm(75,"div",36),e.j41(76,"div",37)(77,"button",38),e.bIt("click",function(){return s.onCancel()}),e.EFF(78," Cancelar "),e.k0s(),e.j41(79,"button",39),e.bIt("click",function(){return s.onSave()}),e.EFF(80,"Guardar "),e.k0s()()()()),2&o&&(e.R7$(3),e.SpI("",s.tipoDialog," Agente Persona"),e.R7$(7),e.Y8G("ngIf","Registrar"==s.tipoDialog),e.R7$(6),e.Y8G("ngModel",s.persona.pers_nombres),e.R7$(4),e.Y8G("ngModel",s.persona.pers_apellidos),e.R7$(4),e.Y8G("ngModel",s.persona.pers_telefono),e.R7$(13),e.Y8G("ngModel",s.usuario.usu_nickname),e.R7$(4),e.Y8G("ngModel",s.usuario.usu_email),e.R7$(4),e.Y8G("ngModel",s.estadoPassword),e.R7$(4),e.Y8G("disabled",!s.estadoPassword)("ngModel",s.passwordNew),e.R7$(4),e.Y8G("ngModel",s.usuario.usu_rol),e.R7$(1),e.Y8G("value","Administrador"),e.R7$(2),e.Y8G("value","Agente"),e.R7$(2),e.Y8G("value","Tecnico"),e.R7$(11),e.Y8G("ngIf",null!=s.imageUrl&&null==s.urlImagendesdeServer),e.R7$(1),e.Y8G("ngIf",null!=s.urlImagendesdeServer&&null==s.imageUrl),e.R7$(9),e.Y8G("color","primary"))},dependencies:[f.MD,f.Sq,f.bT,y.hM,y.E7,k.Hl,k.$z,_.fS,b.nJ,b.RG,c.YN,c.qT,c.xH,c.y7,c.me,c.Zm,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,w.Ve,w.VO,V.wT,x.m_]})}return a})();function W(a,m){1&a&&(e.j41(0,"td",27)(1,"span",32),e.qSk(),e.j41(2,"svg",33),e.nrm(3,"path",34),e.k0s(),e.EFF(4," Activo "),e.k0s()())}function H(a,m){1&a&&(e.j41(0,"td",27)(1,"span",35),e.qSk(),e.j41(2,"svg",33),e.nrm(3,"path",36),e.k0s(),e.EFF(4," Fuera de linea "),e.k0s()())}function Z(a,m){if(1&a){const t=e.RV6();e.j41(0,"tr",25)(1,"th",26),e.EFF(2),e.k0s(),e.j41(3,"td",27),e.EFF(4),e.k0s(),e.j41(5,"td",27),e.EFF(6),e.k0s(),e.j41(7,"td",27),e.EFF(8),e.k0s(),e.DNE(9,W,5,0,"td",28)(10,H,5,0,"td",28),e.j41(11,"td",29)(12,"button",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.getAgenteBY_ID(n.usu_id))}),e.nrm(13,"mat-icon",31),e.k0s(),e.j41(14,"button",30),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.dialogoEliminarPersona(s.personData.pers_id))}),e.nrm(15,"mat-icon",31),e.k0s()()()}if(2&a){const t=m.$implicit;e.R7$(2),e.Lme("",t.pers_nombres," - ",t.pers_apellidos," "),e.R7$(2),e.SpI("",t.usu_nickname," "),e.R7$(2),e.SpI("",t.pers_telefono," "),e.R7$(2),e.SpI("",t.usu_email," "),e.R7$(1),e.Y8G("ngIf","On line"==t.usu_status),e.R7$(1),e.Y8G("ngIf","Off line"==t.usu_status),e.R7$(3),e.Y8G("svgIcon","heroicons_outline:pencil"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:trash")}}const q=()=>[5,10,20],ee=[{path:"",component:(()=>{class a{constructor(t,o,s){this.dialog=t,this._agentesService=o,this._systemServices=s,this.agenteDataCambiante=new $.t([]),this.searchSubject=new S.B,this.searchTerm="",this.index=0,this.limit=5,this.offset=0,this.totalElementos=0,this.pageEvent=new C.KB,this.searchSubject.pipe((0,j.B)(300),(0,A.F)()).subscribe(n=>{n.length>=3?this.getAgentesSearch():this.getAgentes()})}onSearchChange(t){this.searchSubject.next(t)}ngOnInit(){this.getAgentes(),this.extraeUser()}getServerData(t){return this.index=t.pageIndex,this.limit=t.pageSize,this.offset=this.index*this.limit,this.getAgentes(),t}getAgentes(){this._agentesService.getAgentesY_Personas({usu_id:0,opcion:"C",_limite:1*this.limit,_offset:1*this.offset}).subscribe(o=>{this.totalElementos=o.totalItems,this.agenteDataCambiante.next(o.data)},o=>{this._systemServices.showAlertError(o.message)})}getAgentesSearch(){this._agentesService.getAgentesYPersonasSearch({buscar:this.searchTerm,opcion:"S",_limite:this.limit,_offset:this.offset}).subscribe(o=>{this.totalElementos=o.totalItems,this.agenteDataCambiante.next(o.data)},o=>{this._systemServices.showAlertError(o.error.error)})}getAgenteBY_ID(t){this._agentesService.getAgentesYPersonasBY_ID({usu_id:t,opcion:"CP",_limite:this.limit,_offset:this.offset}).subscribe(s=>{(s.code=200)&&(console.log("response"),console.log(s),this.dialogoEditarAGENTE_Persona(s.data,s.persona))},s=>{this._systemServices.showAlertError(s.error.error)})}dialogoEditarAGENTE_Persona(t,o){console.log(t),console.log(o),t.persona=o,t.tipodialogo="Editar",t.usuario=this.userLocal.pers_nombres,this.dialog.open(R,{width:"850px",height:"800px",data:{data:t,persona:o},disableClose:!0}).afterClosed().subscribe(n=>{this.getAgentes()})}dialogoPostPersonas(){this.data={tipodialogo:"Registrar",usuario:this.userLocal.pers_nombres},this.dialog.open(R,{width:"850px",height:"800px",data:{data:this.data},disableClose:!0}).afterClosed().subscribe(o=>{this.getAgentes()})}extraeUser(){this.userLocal=JSON.parse(localStorage.getItem("user"))}static#e=this.\u0275fac=function(o){return new(o||a)(e.rXU(y.bZ),e.rXU(E),e.rXU(I.W))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-agentes"]],standalone:!0,features:[e.aNF],decls:44,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],["mat-dialog-content","",1,"w-full","pl-11","pr-12","flex","py-8"],[1,"flex-auto"],["matInput","","placeholder","Buscar por nombres o cedula","placeholder","Buscar por nombres ",3,"ngModel","ngModelChange","input"],[1,"md-4","my-8","xs:col-4"],["mat-flat-button","","type","button",1,"ml-4",3,"color","click"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"w-full","pl-11","pr-12"],[1,""],[1,"w-full","border-collapse","bg-white","text-left","text-sm","text-gray-500"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-4","font-medium","text-gray-900"],[1,"divide-y","divide-gray-100","border-t","border-gray-100"],["class","odd:bg-white even:bg-gray-50",4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],["paginadorEtiquetas",""],[1,"odd:bg-white","even:bg-gray-50"],[1,"px-6","py-4","font-medium","text-gray-900"],[1,"px-6","py-4"],["class","px-6 py-4",4,"ngIf"],[1,"flex","justify","gap-4","px-6","py-4","font-medium"],["mat-icon-button","",3,"click"],[1,"text-hint",3,"svgIcon"],[1,"inline-flex","items-center","gap-1","rounded-full","bg-green-50","px-2","py-1","text-xs","font-semibold","text-green-600"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3","w-3"],["fill-rule","evenodd","d","M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule","evenodd"],[1,"inline-flex","items-center","gap-1","rounded-full","bg-red-50","px-2","py-1","text-xs","font-semibold","text-red-600"],["d","M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Registros"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Agentes"),e.k0s()()(),e.j41(11,"div",8)(12,"h2",9),e.EFF(13," Agentes "),e.k0s()()()(),e.j41(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),e.EFF(17,"Buscar persona"),e.k0s(),e.j41(18,"input",12),e.bIt("ngModelChange",function(r){return s.searchTerm=r})("input",function(){return s.onSearchChange(s.searchTerm)}),e.k0s()(),e.j41(19,"div",13)(20,"button",14),e.bIt("click",function(){return s.dialogoPostPersonas()}),e.EFF(21," Agregar Persona "),e.nrm(22,"mat-icon",15),e.k0s()()(),e.j41(23,"div",16)(24,"div",17)(25,"table",18)(26,"thead",19)(27,"tr")(28,"th",20),e.EFF(29,"Nombres"),e.k0s(),e.j41(30,"th",20),e.EFF(31,"Usuario"),e.k0s(),e.j41(32,"th",20),e.EFF(33,"Celular"),e.k0s(),e.j41(34,"th",20),e.EFF(35,"Email"),e.k0s(),e.j41(36,"th",20),e.EFF(37,"Estado"),e.k0s(),e.j41(38,"th",20),e.EFF(39,"Acciones"),e.k0s()()(),e.j41(40,"tbody",21),e.DNE(41,Z,16,9,"tr",22),e.k0s()()(),e.j41(42,"mat-paginator",23,24),e.bIt("page",function(r){return s.pageEvent=s.getServerData(r)}),e.k0s()()()),2&o&&(e.R7$(8),e.Y8G("svgIcon","heroicons_mini:chevron-right"),e.R7$(10),e.Y8G("ngModel",s.searchTerm),e.R7$(2),e.Y8G("color","primary"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:user"),e.R7$(19),e.Y8G("ngForOf",s.agenteDataCambiante.value),e.R7$(1),e.Y8G("length",s.totalElementos)("pageSize",s.limit)("pageSizeOptions",e.lJ4(8,q)))},dependencies:[G.PO,c.YN,c.me,c.BC,c.vS,Y.EE,x.m_,x.An,f.MD,f.Sq,f.bT,k.Hl,k.$z,k.iY,b.RG,b.rl,b.nJ,b.JW,_.fS,_.fg,M.tP,C.Ou,C.iy]})}return a})()}]}}]);