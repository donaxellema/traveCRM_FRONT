"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[568],{5568:(j,l,s)=>{s.r(l),s.d(l,{default:()=>R});var p=s(1562),d=s(177),f=s(2102),u=s(9042),h=s(2798),v=s(9213),g=s(8834),c=s(5596),m=s(7575),t=s(4438),C=s(1087);function M(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const a=t.XpG(2);t.R7$(1),t.JRh(a.fileName)}}function x(n,r){if(1&n){const a=t.RV6();t.j41(0,"div",10)(1,"button",11),t.bIt("click",function(){t.eBV(a),t.XpG();const o=t.sdS(8);return t.Njj(o.click())}),t.EFF(2," Seleccionar Archivo "),t.k0s(),t.DNE(3,M,2,1,"span",6),t.k0s()}if(2&n){const a=t.XpG();t.R7$(1),t.Y8G("disabled",a.isUploading),t.R7$(2),t.Y8G("ngIf",a.fileName)}}function F(n,r){if(1&n&&(t.j41(0,"div"),t.nrm(1,"mat-progress-bar",12),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&n){const a=t.XpG();t.R7$(1),t.Y8G("value",a.progress),t.R7$(2),t.SpI("",a.progress,"% completado")}}function b(n,r){if(1&n&&(t.j41(0,"p",13),t.EFF(1),t.k0s()),2&n){const a=t.XpG();t.R7$(1),t.SpI(" ",a.uploadMessage," ")}}function I(n,r){if(1&n){const a=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){t.eBV(a);const o=t.XpG();return t.Njj(o.restartUpload())}),t.EFF(1," Volver a Importar "),t.k0s()}}const R=[{path:"",component:(()=>{class n{constructor(a){this.fileUploadService=a,this.fileName="",this.progress=0,this.isUploading=!1,this.uploadMessage=""}onFileSelected(a){const o=a.target.files?.[0];o&&(this.fileName=o.name,this.isUploading=!0,this.progress=0,this.fileUploadService.uploadFile(o).subscribe({next:i=>{i.type===p.hv.UploadProgress&&i.total?this.progress=Math.round(100*i.loaded/i.total):i.type===p.hv.Response&&(this.uploadMessage=`Archivo cargado exitosamente. Total contactos: ${i.body.total}`,this.isUploading=!1)},error:()=>{this.uploadMessage="Error al cargar el archivo.",this.isUploading=!1}}))}restartUpload(){this.fileName="",this.progress=0,this.uploadMessage=""}static#t=this.\u0275fac=function(e){return new(e||n)(t.rXU(C.d))};static#a=this.\u0275cmp=t.VBU({type:n,selectors:[["app-cargamasiva"]],standalone:!0,features:[t.aNF],decls:14,vars:4,consts:[[1,"progress-card"],[1,"file-upload-container"],[1,"title"],["type","file","accept",".xlsx, .xls","hidden","",3,"change"],["fileInput",""],["class","upload-actions",4,"ngIf"],[4,"ngIf"],["class","upload-message",4,"ngIf"],[1,"actions"],["mat-button","","color","accent",3,"click",4,"ngIf"],[1,"upload-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","determinate",3,"value"],[1,"upload-message"],["mat-button","","color","accent",3,"click"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-header")(4,"h1",2),t.EFF(5,"Subir Archivos de Contactos"),t.k0s()(),t.j41(6,"mat-card-content")(7,"input",3,4),t.bIt("change",function(U){return o.onFileSelected(U)}),t.k0s(),t.DNE(9,x,4,2,"div",5)(10,F,4,2,"div",6)(11,b,2,1,"p",7),t.k0s(),t.j41(12,"mat-card-actions",8),t.DNE(13,I,2,0,"button",9),t.k0s()()()()),2&e&&(t.R7$(9),t.Y8G("ngIf",!o.isUploading),t.R7$(1),t.Y8G("ngIf",o.isUploading),t.R7$(1),t.Y8G("ngIf",o.uploadMessage),t.R7$(2),t.Y8G("ngIf",!o.isUploading&&o.uploadMessage))},dependencies:[f.RG,u.fS,d.MD,d.bT,g.Hl,g.$z,c.Hu,c.RN,c.YY,c.m2,c.MM,m.PO,m.HM,h.Ve,v.m_],styles:['@charset "UTF-8";.progress-card[_ngcontent-%COMP%]{margin:20px auto;max-width:500px;padding:20px}.file-upload-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f4f4f4}mat-card[_ngcontent-%COMP%]{max-width:500px;width:100%;text-align:center;box-shadow:0 4px 6px #0000001a}.title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0;color:#3f51b5}.upload-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10px}.upload-message[_ngcontent-%COMP%]{margin-top:10px;color:green;font-weight:700}mat-progress-bar[_ngcontent-%COMP%]{margin-top:15px}.actions[_ngcontent-%COMP%]{margin-top:10px}']})}return n})()}]}}]);