<div class="flex flex-col flex-auto min-w-0">

    <!-- Header -->
    <div class="flex flex-col shadow bg-card">

        <!-- Cover image -->
        <div>
            <div class="relative flex items-center justify-center  overflow-hidden ">
                <div *ngIf="habilitaChangeFoto==true" class="absolute inset-0 bg-black bg-opacity-50 z-10"></div>
                <div *ngIf="habilitaChangeFoto==true" class="absolute inset-0 flex items-center justify-center z-20">
                    <div>
                        <!-- <div class="mb-4">
                            <label class="block text-gray-700"> Seleccionar Imagen </label>
                            <input type="file" (change)="onFileChange($event)" class="w-full px-3 py-2 border rounded">
                          </div> -->

                        <input
                            id="banner-file-input"
                            class="absolute h-0 w-0 opacity-0 invisible pointer-events-none"
                            type="file"
                            [multiple]="false"
                            [accept]="'image/jpeg, image/png'"
                            (change)="onFileChange($event)"
                            >
                        <label
                            class="flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover"
                            for="banner-file-input"
                            matRipple>
                            <mat-icon
                                class="text-white"
                                [svgIcon]="'heroicons_outline:camera'"></mat-icon>
                        </label>
                    </div>
                    <div>
                        <button
                            mat-icon-button (click)="removeBanner()"
                            >
                            <mat-icon
                                class="text-white"
                                [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                        </button>
                    </div>
                    
                    <div>
                        <button
                            mat-icon-button
                            (click)="habilitaChangePhoto(true)"
                            >
                            <mat-icon
                                class="text-white"
                                [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                        </button>
                    </div>
                </div>

                <img
                class="h-40 lg:h-80 object-cover"
                src= "{{urlImagen}}{{user?.usu_banner}}"
                alt="Cover image">


                
            <!-- <img
                class="h-40 lg:h-80 object-cover"
                src="assets/images/pages/profile/cover.jpg"
                alt="Cover image"> -->
                
                </div>
        </div>

        <!-- User info -->
        <div class="flex flex-col flex-0 lg:flex-row items-center max-w-5xl w-full mx-auto px-8 lg:h-18 bg-card">

            <!-- Avatar -->
            <div class="-mt-26 lg:-mt-22 rounded-full">
                <div class="relative flex items-center justify-center w-32 h-32 rounded-full overflow-hidden ring-4 ring-bg-card">
                <div *ngIf="habilitaChangeFoto==true"  class="absolute inset-0 bg-black bg-opacity-50 z-10"></div>
                <div *ngIf="habilitaChangeFoto==true" class="absolute inset-0 flex items-center justify-center z-20">
                    <!-- <div>
                        <input
                            id="avatar-file-input"
                            class="absolute h-0 w-0 opacity-0 invisible pointer-events-none"
                            type="file"
                            [multiple]="false"
                            (change)="onFileChange($event)"
                            [accept]="'image/jpeg, image/png'"
                            
                            #avatarFileInput>
                        <label
                            class="flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover"
                            for="avatar-file-input"
                            matRipple>
                            <mat-icon
                                class="text-white"
                                [svgIcon]="'heroicons_outline:camera'"></mat-icon>
                        </label>
                    </div> -->

                    <div>
                        <input
                          id="avatar-file-input"
                          class="absolute h-0 w-0 opacity-0 invisible pointer-events-none"
                          type="file"
                          [multiple]="false"
                          (change)="onFileChangeAvatar($event)"
                          [accept]="'image/jpeg, image/png'"
                        >
                        <label
                          class="flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover"
                          for="avatar-file-input"
                          matRipple>
                          <mat-icon
                            class="text-white"
                            [svgIcon]="'heroicons_outline:camera'"></mat-icon>
                        </label>
                      </div>

                    <div>
                        <button
                            mat-icon-button (click)="removeAvatar()"
                            > 
                            <mat-icon
                                class="text-white"
                                [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                        </button>
                    </div>
                    
                    <div>
                        <button
                            mat-icon-button
                            (click)="habilitaChangePhoto(true)"
                            >
                            <mat-icon
                                class="text-white"
                                [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                        </button>
                    </div>
                </div>


                <img
                    class="w-32 h-32 rounded-full ring-4 ring-bg-card"
                    src={{urlImagen}}{{user?.usu_imagen}}
                    alt="User avatar">
                <!-- <img
                    class="w-32 h-32 rounded-full ring-4 ring-bg-card"
                    src="assets/images/avatars/male-04.jpg"
                    alt="User avatar"> -->

                </div>

            </div>





           









            <!-- Details -->
            <div class="flex flex-col items-center lg:items-start mt-4 lg:mt-0 lg:ml-8">
                <div class="text-lg font-bold leading-none"> {{user?.pers_nombres}} </div>
                <div class="text-secondary">{{user?.pers_ciudad}}, {{user?.pers_pais}}</div>
            </div>

            <!-- Separator -->
            <!-- <div class="hidden lg:flex h-8 mx-8 border-l-2"></div> -->

            <!-- Stats -->
            <!-- <div class="flex items-center mt-6 lg:mt-0 space-x-6">
                <div class="flex flex-col items-center">
                    <span class="font-bold">200k</span>
                    <span class="text-sm font-medium text-secondary">FOLLOWERS</span>
                </div>
                <div class="flex flex-col items-center">
                    <span class="font-bold">1.2k</span>
                    <span class="text-sm font-medium text-secondary">FOLLOWING</span>
                </div>
            </div> -->

            <!-- Menu -->
            <div class="flex items-center mt-8 mb-4 lg:m-0 lg:ml-auto space-x-6">
                
                <a
                    class="font-medium"
                    [matMenuTriggerFor]="configuracionesPerfil"
                    [routerLink]="['./']"
                    >
                    Configuracion
                </a>

                <mat-menu #configuracionesPerfil="matMenu">
                    <button mat-menu-item (click)="habilitaChangePhoto(habilitaChangeFoto)">
                        <span class="flex items-center">
                            <mat-icon
                                class="icon-size-5 mr-3"
                                [svgIcon]="'heroicons_solid:camera'"></mat-icon>
                            <span>Cambiar foto perfil</span>
                        </span>
                    </button>
                    <!-- <button mat-menu-item>
                        <span class="flex items-center">
                            <mat-icon
                                class="icon-size-5 mr-3"
                                [svgIcon]="'heroicons_solid:key'"></mat-icon>
                            <span>Cambiar contraseña</span>
                        </span>
                    </button> -->
                    <!-- <button mat-menu-item>
                        <span class="flex items-center">
                            <mat-icon
                                class="icon-size-5 mr-3"
                                [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
                            <span>cambiar mi correo</span>
                        </span>
                    </button> -->
                    <button mat-menu-item (click)="dialogoEditarPerfil(dataPerf)" >
                        <span class="flex items-center">
                            <mat-icon
                                class="icon-size-5 mr-3"
                                [svgIcon]="'heroicons_solid:identification'"></mat-icon>
                            <span>actualizar mis datos</span>
                        </span>
                    </button>

                    


                </mat-menu>
                
            </div>

        </div>

    </div>

    <!-- Main -->
    <div class="flex flex-auto justify-center w-full max-w-5xl mx-auto p-6 sm:p-8">

        <!-- Column -->
        <div class="hidden lg:flex flex-col items-start mr-8">

            <!-- About me -->
            <fuse-card class="flex flex-col max-w-100 w-full p-8">
                <div class="text-2xl font-semibold leading-tight">Acerca de mi</div>
                <div class="mt-4">
                   {{user?.usu_descripcion}}
                </div>
                <hr class="w-full border-t my-6">
                <div class="flex flex-col">
                    <div class="flex items-center">
                        <mat-icon
                            class="icon-size-5 mr-3"
                            [svgIcon]="'heroicons_solid:map-pin'"></mat-icon>
                        <span class="leading-none">{{user.pers_ciudad}}, {{user.pers_pais}}</span>
                    </div>
                    <div class="flex items-center mt-4">
                        <mat-icon
                            class="icon-size-5 mr-3"
                            [svgIcon]="'heroicons_solid:briefcase'"></mat-icon>
                        <span class="leading-none"> {{user.emp_nombre}}. {{user.emp_camp1}}  </span>
                    </div>
                    <!-- <div class="flex items-center mt-4">
                        <mat-icon
                            class="icon-size-5 mr-3"
                            [svgIcon]="'heroicons_solid:cake'"></mat-icon>
                        <span class="leading-none">April, 24</span>
                    </div> -->
                </div>
                <!-- <a
                    class="px-6 mt-8"
                    mat-flat-button
                    [color]="'primary'"
                    [routerLink]="['./']">
                    See complete bio
                </a> -->
            </fuse-card>

            <!-- Followers -->
            <fuse-card class="flex flex-col max-w-100 w-full mt-8 px-8 pt-6 pb-4">
                <div class="flex items-center justify-between">
                    <div class="text-2xl font-semibold leading-tight">Clientes</div>
                    <div class="-mr-3">
                        <button
                            mat-icon-button
                            [matMenuTriggerFor]="listCard08Menu">
                            <mat-icon
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:ellipsis-vertical'"></mat-icon>
                        </button>
                        <mat-menu #listCard08Menu="matMenu">
                            <button mat-menu-item>Find friends</button>
                        </mat-menu>
                    </div>
                </div>
                <div class="flex flex-col">
                    <div class="flex justify-between mt-6">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-01.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-01.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-02.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-02.jpg"
                            alt="Card cover image">
                    </div>
                    <div class="flex justify-between mt-3">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-03.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-04.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-03.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-04.jpg"
                            alt="Card cover image">
                    </div>
                    <div class="flex justify-between mt-3">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-05.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-06.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-05.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-06.jpg"
                            alt="Card cover image">
                    </div>
                    <div class="flex justify-between mt-3">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-07.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-07.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/male-08.jpg"
                            alt="Card cover image">
                        <img
                            class="w-14 h-14 rounded-full"
                            src="assets/images/avatars/female-08.jpg"
                            alt="Card cover image">
                    </div>
                </div>
                <div class="flex items-center mt-6 -mx-3">
                    <!-- <a
                        class="px-3"
                        mat-button
                        [color]="'primary'"
                        [routerLink]="['./']">
                        Ver mis clientes
                    </a> -->
                    <a
                    class="px-6 mt-8"
                    mat-flat-button
                    [color]="'primary'"
                    [routerLink]="['./']">
                    Ver mis clientes
                </a> 
                </div>
            </fuse-card>

            

        </div>

        <!-- Column -->
        <div class="flex flex-col  w-200 items-start">

            <!-- Create Post -->
            <fuse-card class="flex flex-col w-170 w-full p-6 sm:p-8 pb-6">
                <div class="text-xl font-semibold">Mensaje de apertura</div>
                <div class="flex flex-col sm:flex-row items-start mt-8">
                    <div class="flex items-center mb-6 sm:mb-0">
                        <img
                            class="w-12 min-w-12 h-12 rounded-full mr-4"
                            src="{{urlImagen}}{{user.usu_imagen}}"
                            alt="Card cover image">
                        <div class="sm:hidden">{{user.pers_nombres}} </div>
                    </div>
                    <mat-form-field
                        class="w-full"
                        [subscriptSizing]="'dynamic'">
                        <textarea
                            [(ngModel)]="dataPerf.usu_mensajes" 
                            matInput
                            [placeholder]="'Escribe un mensaje de apertura para iniciar una charla con tu LEAD'"
                            [rows]="3"
                            cdkTextareaAutosize></textarea>
                    </mat-form-field>
                </div>
                <div class="flex items-center mt-6 sm:mt-8 -mx-3">
                    
                    <!-- <button
                        class="px-3 mr-1 hidden sm:inline-flex"
                        mat-button>
                        <mat-icon
                            class="icon-size-5"
                            [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                        <span class="ml-2">Tag Friends</span>
                    </button>
                    <button
                        class="px-3 mr-1 hidden sm:inline-flex"
                        mat-button>
                        <mat-icon
                            class="icon-size-5"
                            [svgIcon]="'heroicons_solid:face-smile'"></mat-icon>
                        <span class="ml-2">Feeling</span>
                    </button>
                    <button
                        class="px-3"
                        mat-button
                        [matMenuTriggerFor]="postCardMenu01">
                        <mat-icon
                            class="icon-size-5"
                            [svgIcon]="'heroicons_solid:ellipsis-horizontal'"></mat-icon>
                    </button>
                    <mat-menu #postCardMenu01="matMenu">
                        <button
                            class="sm:hidden"
                            mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                                <span>Tag Friends</span>
                            </span>
                        </button>
                        <button
                            class="sm:hidden"
                            mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:face-smile'"></mat-icon>
                                <span>Feeling</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:play'"></mat-icon>
                                <span>Live</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:sparkles'"></mat-icon>
                                <span>Gif</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:map-pin'"></mat-icon>
                                <span>Check in</span>
                            </span>
                        </button>
                    </mat-menu> -->
                </div>
            </fuse-card>

            <!-- Post 1 -->
            <fuse-card
                class="flex flex-col w-170 w-full mt-8"
                #expandableCard02="fuseCard">
                <div class="flex flex-col w-160 w-full p-6 sm:p-8 pb-6">
                    <div class="flex items-center justify-between">
                        <div class="text-xl font-semibold">Campañas Vigentes</div>
                        <!-- <div class="text-2xl font-semibold leading-tight">Campañas Vigentes</div> -->
                        <div class="-mr-3">
                            <button
                                mat-icon-button
                                [matMenuTriggerFor]="listCard02Menu">
                                <mat-icon
                                    class="icon-size-5"
                                    [svgIcon]="'heroicons_solid:ellipsis-vertical'"></mat-icon>
                            </button>
                            <mat-menu #listCard02Menu="matMenu">
                                <button (click)="getCampanias()" mat-menu-item>Actualizar lista</button>
                            </mat-menu>
                        </div>
                    </div>
                    <div *ngFor="let camp of campaniasData">

                    <div  class="flex flex-col mt-5">
                        <div class="flex items-center">

                                <div class="mr-3 w-14 h-14 rounded-full flex items-center justify-center"
                                    [ngStyle]="{ 'border':'2px solid ' + darkenColor(camp.etiq_color,20)}" >
                                    <mat-icon class="justify-center" svgIcon="heroicons_outline:bookmark" [ngStyle]="{ 'color': darkenColor(camp.etiq_color,30) }"></mat-icon>
                                </div>

                                <div class="flex flex-col min-w-0">
                                    <div class="font-medium leading-none"> {{camp.camp_nombre}} </div>
                                    <div class="text-md truncate leading-none mt-1">{{camp.camp_descripcion}}</div>
                                    <div class="text-md leading-none text-secondary mt-2"> {{camp.camp_fecha_ini | date:'yyyy-MM-dd'}} - hasta - {{camp.camp_fecha_fin | date:'yyyy-MM-dd'}}</div>
                                </div>

                        </div>
                        
                    </div>
                </div>

                    <!-- <img
                        class="w-10 h-10 rounded-full mr-4"
                        src="assets/images/avatars/female-01.jpg"
                        alt="Card cover image">
                    <div class="flex flex-col">
                        <span class="font-semibold leading-none">Caroline Lundu</span>
                        <span class="text-sm text-secondary leading-none mt-1">29 minutes ago</span>
                    </div>
                    <button
                        class="ml-auto -mr-4"
                        mat-icon-button
                        [matMenuTriggerFor]="postCardMenu02">
                        <mat-icon
                            class="icon-size-5"
                            [svgIcon]="'heroicons_solid:ellipsis-vertical'"></mat-icon>
                    </button>

                    <mat-menu #postCardMenu02="matMenu">
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:arrow-up-tray'"></mat-icon>
                                <span>Save post</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
                                <span>Hide post</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:clock'"></mat-icon>
                                <span>Snooze for 30 days</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:minus-circle'"></mat-icon>
                                <span>Hide all</span>
                            </span>
                        </button>
                        <mat-divider class="my-2"></mat-divider>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:exclamation-triangle'"></mat-icon>
                                <span>Report post</span>
                            </span>
                        </button>
                        <button mat-menu-item>
                            <span class="flex items-center">
                                <mat-icon
                                    class="icon-size-5 mr-3"
                                    [svgIcon]="'heroicons_solid:bell'"></mat-icon>
                                <span>Turn on notifications for this post</span>
                            </span>
                        </button>
                    </mat-menu> -->
                    <div class="flex items-center mt-6 -mx-3">
                        <!-- <a
                            class="px-3"
                            mat-button
                            [color]="'primary'"
                            [routerLink]="['./']">
                            Ver todas las campañas existentes
                        </a> -->
                        <a
                            class="px-6 mt-8"
                            mat-flat-button
                            [color]="'primary'"
                            [routerLink]="['./']"  (click)="dialogoCampanias()">
                            Ver campañas
                        </a> 
                    </div>

                </div>
               
            </fuse-card>

        </div>

    </div>

</div>

